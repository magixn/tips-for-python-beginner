第一次作业刚刚结束，很多同学会问：我第一次写程序，出了Bug找不到，这该如何是好啊！说实话，Debug主要是个经验活：犯的错多了，就能见多识广；Debug也就能快准狠。 大家不要因为遇到Bug而灰心丧气。就算是经验极其丰富的程序员，也肯定会遇到Bug。 接下来，就教大家一些Debug的小技巧/范式，能帮助大家进入Debug快车道。

## 学会定位：简单而实用的print

初学者往往陷入一个误区：遇到一个Bug，然后在电脑面前盯着自己程序苦思冥想，找不到哪里写错了。实际上，快速浏览自己程序后还是发现不了Bug，有经验的Coder会先去用print定位自己Bug。举个例子：

小明和小红被要求写一个程序：输入为每行3个整数。目标是把每个整数增加一并且输出。他们都写了以下程序：

```python
line = input()
while line:
    a, b, c = line.split()
    print("{} {} {}".format(int(a) + 1, int(b) + 1, int(c) + 1))
    line = input()
```

但由于TA日夜操劳，输入文本在一行少打了一个数字：

```
1 2 3
4 5
7 8 9
```

**小明**把样例程序输入到他的程序，发现程序报错了：

```
Traceback (most recent call last): 
File "D:xxx", line 3, in <module> a, b, c = line.split()
ValueError: not enough values to unpack (expected 3, got 2)
```

**小明**花了`1 hour` 去解决问题：

- 首先花了`10min` ：**小明**通过搜索引擎理解了这个错误信息意思是split只有返回两个结果。
- 花了`10min` 怀疑人生：为什么3个数字能split出来两个结果。
- 花了`10min` 去查询split文档，发现自己理解的没有问题。
- 开始求助他的室友，`10min` 内由于室友也忙着Debug，并没给他回复。他现在心情有点崩溃。
- `5min` 后，掉头发的**小明**突然想到是不是输入文件出了问题。于是，他惊喜地发现了问题。
- 花了`5min` ，在本地修改了数据，并愤怒地在Piazza上向TA反映该问题。

**小红**也碰到了一样的报错。经验丰富的她花了`2min` 临时修改了程序，用print在split前事先check每行内容：

```python
line = input()
while line:
    print(line)
    a, b, c = line.split()
    line = input()
```

她发现在第二行的时候，line只有两个数字。她发现了Bug并在Piazza上向TA反馈了该问题。

### print debug法总结

上面一个例子，通过在报错行前加入一行print，有时候就能很好的知道bug在哪里。有时候，我们可能要添加多行print，在必要的步骤前去确认程序是否达到我们预期的效果。

## 刹车&探索：断点定位法

除了用print，利用pdb等**断点（breakpoint）**工具，我们也能很好地检查程序在运行过程中各个变量的状态。

### 什么是断点？
断点就是人为在程序特定行设定一个”刹车”，让程序在特定步骤暂停。开发者可以在这个时候借助调试器提供的工具，去对程序做检查。

### 样例：用VSCode去设置断点
首先在VSCode种打开一个py脚本。左键行数左侧区域，就会出现一个红点：断点即设置成功。

![image-20211017223627560.png](/redirect/s3?bucket=uploads&prefix=paste%2Fissq6djujcn6o8%2F8a66010b31d8934612856e2a26325f2f83815dcb8fce046d5a44094b086ed5ea%2Fimage-20211017223627560.png)


工具栏中，在`Run`下选择`Start Debugging`（按下`F5`）。

![image-20211017223655742.png](/redirect/s3?bucket=uploads&prefix=paste%2Fissq6djujcn6o8%2Fb43e883af55aee8d92cbc1a5dc5ee8710f1f103c542ddecb04f7a8f3407106e1%2Fimage-20211017223655742.png)

此时程序即可运行到断点处停下，且在左侧显示变量等信息。

![image-20211017223922162.png](/redirect/s3?bucket=uploads&prefix=paste%2Fissq6djujcn6o8%2F0ffd9f28c205dfb68bc40f3d19b8ff77464ff7a2b11d27f087017f16563ed8f1%2Fimage-20211017223922162.png)

若想让程序继续执行，按下`F5`即可，程序就会继续运行直到碰到下一个断点，或者程序结束。

### 断点debug法总结

断点是很强大的debug工具，他的功能除了上述例子提到的外，还有很多，感兴趣的同学可以自行阅读文档进行学习。除了VSCode，PyCharm等IDE也都具有断点调试的功能。断点可以让你在关键步骤，全面检查程序的状态。

## Divde&Conquer：分而治之

面对一个很复杂的程序时，有些同学喜欢先一口气写完，然后开始Debug。这其实是一个不太良好的习惯。因为，更长的程序，可能意味着错误更加难寻找。如果一个程序包括：`读入数据` ->`计算得到结果` ->`输出` 。那么，比较好的方式不是直接一口气写完。而是在一开始，处理完数据读入后，立马通过print等手段，去检查数据是否正常读入。

### 长程序的分治Debug法：注释

当你找一个经验丰富的同学帮你Debug（**作业和测验坚决不允许，这违反学术诚信！**），他看到密密麻麻的报错文本，就会告诉你：先把这段注释了，看看其他有没有问题。举个例子：

```python3
a = 10086
# lines of code you want to debug
print(a)
b = 23
b = b / 0
```

有可能你现在只关注a之前的运算是否正确。然而，这个时候，你运行发现b后面的运算b/0的报错干扰了你前面的debug。这个时候，将指定行注释：

```python3
a = 10086
# lines of code you want to debug
print(a)
# b = 23
# b = b / 0
```

这样，后面的程序就干扰不到你了。在面对几百行代码的时候，这样的策略尤其有用。这可以帮助你节省时间，聚焦于指定的代码段。

## Power of internet：学会分享和求助他人

有时候，本地测试过了。然而，你在线上OJ测试时，发现不能拿到全部得分。自己试了很久依旧无法找到问题所在。这个时候，有以下方法：

- 去Piazza论坛，看看有没有同学根据这道题提过类似问题（很多时候，你的问题可能已经被别人提过了！）；
- 借助搜索引擎，在互联网上去找一些技术性问题的解决方法；
- 向TA求助，TA会帮你查看是否题目或者testcase有问题，并给出一些建议。

如果你解决了某些棘手的问题，那也可以在Piazza上发一些Post：这能帮助其他同学解决类似的困惑。

## Debug 总结

其实Debug就和武林秘籍一样，每个经验丰富的Coder都有自己的独门秘籍。这篇文章只是给大家提供一些启发。多写多思考，才是成为Debug高手的唯一路径。有时候，Bug真的藏在一些你意想不到的地方。

此外，由于课程同学较多。在以后作业渐渐变复杂的时候，Debug工作量会很大。由于TA人数和资源有限，为了避免同学收到不公平对待和培养大家独立编程的能力，TA原则上是不能帮助同学进行逐行Debug的。若确有疑问，推荐大家将自己代码有困惑的片段，向TA询问，而不是整段的代码。感谢大家的理解与支持。

最后，分享一个Python练习网站，推荐对Python不熟悉的同学多多练习：https://www.hackerrank.com/domains/python。